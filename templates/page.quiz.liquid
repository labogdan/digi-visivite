<link rel="stylesheet" type="text/css" href="https://cdn.shopify.com/s/files/1/0265/0485/5587/files/foundation.min.css?v=1595429603">
<style>
        .quiz-tab {
          display: none;
        }
        .step {
          height: 15px;
          width: 15px;
          margin: 0 2px;
          background-color: #bbbbbb;
          border: none;  
          border-radius: 50%;
          display: inline-block;
          opacity: 0.5;
        }
        .step.active {
          opacity: 1;
        }
        .step.finish {
          background-color: #4CAF50;
        }

        .quiz-tab.error .options legend
        {
            color: red; 
        }
        </style>
{% include 'atb' zone:"Top"%}
<section class="quiz">
    <div class="grid-container">
        <div class="grid-x grid-margin-x">
            <div class="cell medium-4">
                <img src="https://cdn.shopify.com/s/files/1/0265/0485/5587/files/quiz-image.jpg?v=1595426594"
                    alt="Eye Health Vision Assessment">
            </div>
            <div class="cell medium-8">
                 <form id="email_signup" action="//manage.kmail-lists.com/subscriptions/subscribe" data-ajax-submit="//manage.kmail-lists.com/ajax/subscriptions/subscribe" method="GET" target="_blank" novalidate="novalidate">
                   <input type="hidden" name="g" value="Xn6aXi">
                   <input type="hidden" name="$fields" value="$consent">
                   <input type="hidden" name="$list_fields" value="$consent"> 
                   <!-- One "tab" for each step in the form: -->
                    <div class="quiz-tab">
                        <h1>Complete your free eye health assessment.</h1>
                    </div>
                    <div class="quiz-tab">
                        <h2>What is your main reason for seeking nutritional supplements for your eyes?</h2>
              			<div class="options">
                          <fieldset>
                          	<legend>Check All That Apply</legend>
                            <div class="answer"><input type="checkbox" name="mainReason[]" value="I have macular degeneration." id="checkbox1" required><label for="checkbox1">I have macular degeneration.</label></div>
                            <div class="answer"><input type="checkbox" name="mainReason[]" value="I have a family member with macular degeneration." id="checkbox2" required><label for="checkbox2">I have a family member with macular degeneration.</label></div>
                            <div class="answer"><input type="checkbox" name="mainReason[]" value="My vision is getting worse." id="checkbox3" required><label for="checkbox3">My vision is getting worse.</label></div>
                            <div class="answer"><input type="checkbox" name="mainReason[]" value="I’m concerned about overall eye health." id="checkbox4" required><label for="checkbox4">I’m concerned about overall eye health.</label></div>
                            <div class="answer"><input type="checkbox" name="mainReason[]" value="I have dry eye." id="checkbox5" required><label for="checkbox5">I have dry eye.</label></div>
                            <div class="answer"><input type="checkbox" name="mainReason[]" value="None" id="checkbox35" required><label for="checkbox35">None</label></div>
                          </fieldset>
                      </div>
                    </div>
                    <div class="quiz-tab">
                        <h2>Which of the following would you like to know more about?</h2>
              			<div class="options">
                          <fieldset>
                            <legend>Check All That Apply</legend>
                            <div class="answer"><input type="checkbox" name="products[]" value="AREDS and AREDS 2" id="checkbox6" required><label for="checkbox6">AREDS and AREDS 2</label></div>
                            <div class="answer"><input type="checkbox" name="products[]" value="Lutein and Zeaxanthin" id="checkbox7" required><label for="checkbox7">Lutein and Zeaxanthin</label></div>
                            <div class="answer"><input type="checkbox" name="products[]" value="Effects of Blue Light on Eyesight" id="checkbox8" required><label for="checkbox8">Effects of Blue Light on Eyesight</label></div>
                            <div class="answer"><input type="checkbox" name="products[]" value="Cataracts" id="checkbox9" required><label for="checkbox9">Cataracts</label></div>
                            <div class="answer"><input type="checkbox" name="products[]" value="Glaucoma" id="checkbox10" required><label for="checkbox10">Glaucoma</label></div>
                            <div class="answer"><input type="checkbox" name="products[]" value="Night Vision Difficulty" id="checkbox11" required><label for="checkbox11">Night Vision Difficulty</label></div>
                            <div class="answer"><input type="checkbox" name="products[]" value="Near Vision Difficulty" id="checkbox12" required><label for="checkbox12">Near Vision Difficulty</label></div>
                            <div class="answer"><input type="checkbox" name="products[]" value="None" id="checkbox36" required><label for="checkbox36">None</label></div>
                          </fieldset>
                      </div>
                    </div>
                    <div class="quiz-tab">
                       	<h2>Which of the following statements are true?</h2>
              			<div class="options">
                          <fieldset>
                          	<legend>Check All That Apply</legend>
                            <div class="answer"><input type="checkbox" name="statements[]" value="A good general multivitamin has proven benefits for eye health." id="checkbox13" required><label for="checkbox13">A good general multivitamin has proven benefits for eye health.</label></div>
                            <div class="answer"><input type="checkbox" name="statements[]" value="Lutein and Zeaxanthin can improve visual contrast and provide blue light protection." id="checkbox14" required><label for="checkbox14">Lutein and Zeaxanthin can improve visual contrast and provide blue light protection.</label></div>
                            <div class="answer"><input type="checkbox" name="statements[]" value="AREDS 2 uses 100% of certain vitamins to provide macular degeneration benefit." id="checkbox15" required><label for="checkbox15">AREDS 2 uses 100% of certain vitamins to provide macular degeneration benefit.</label></div>
                            <div class="answer"><input type="checkbox" name="statements[]" value="Artificial tear eyedrops provide long-term relief of dry eye symptoms." id="checkbox16" required><label for="checkbox16">Artificial tear eyedrops provide long-term relief of dry eye symptoms.</label></div>
                            <div class="answer"><input type="checkbox" name="statements[]" value="Cataracts are a veil that grow over the eye. " id="checkbox17" required><label for="checkbox17">Cataracts are a veil that grow over the eye. </label></div>
                            <div class="answer"><input type="checkbox" name="statements[]" value="You can usually feel increased eye pressure in glaucoma." id="checkbox18" required><label for="checkbox18">You can usually feel increased eye pressure in glaucoma.</label></div>
                            <div class="answer"><input type="checkbox" name="statements[]" value="20/20 vision means that you have perfectly healthy eyes." id="checkbox19" required><label for="checkbox19">20/20 vision means that you have perfectly healthy eyes.</label></div>
                            <div class="answer"><input type="checkbox" name="statements[]" value="Taking Vitamin E while also taking anticoagulants can increase your likelihood of bleeding." id="checkbox20" required><label for="checkbox20">Taking Vitamin E while also taking anticoagulants can increase your likelihood of bleeding.</label></div>
                            <div class="answer"><input type="checkbox" name="statements[]" value="None" id="checkbox37" required><label for="checkbox37">None</label></div>
                          </fieldset>
                      	</div>
                    </div>
                  	<div class="quiz-tab">
                       	<h2>What is your age?</h2>
              			<div class="options">
                          <fieldset>
                          	<legend>Check Select</legend>
                            <div class="answer"><input type="radio" name="age" value="Younger than 40" id="checkbox21" required><label for="checkbox21">Younger than 40</label></div>
                            <div class="answer"><input type="radio" name="age" value="40-50" id="checkbox22" required><label for="checkbox22">40-50</label></div>
                            <div class="answer"><input type="radio" name="age" value="51-60" id="checkbox23" required><label for="checkbox23">51-60</label></div>
                            <div class="answer"><input type="radio" name="age" value="61 or older" id="checkbox24" required><label for="checkbox24">61 or older</label></div>
                            <div class="answer"><input type="radio" name="age" value="Prefer not to answer" id="checkbox38" required><label for="checkbox38">Prefer not to answer</label></div>
                          </fieldset>
                      	</div>
                    </div>
                  	<div class="quiz-tab">
                       	<h2>Do you have any of these other health problems?</h2>
              			<div class="options">
                          <fieldset>
                          	<legend>Check All That Apply</legend>
                            <div class="answer"><input type="checkbox" name="healthProblems[]" value="Autoimmune disease (rheumatoid arthritis, anklyosing spondylitis, Sarcoid, Lupus, etc.)" id="checkbox25" required><label for="checkbox25">Autoimmune disease (rheumatoid arthritis, anklyosing spondylitis, Sarcoid, Lupus, etc.)</label></div>
                            <div class="answer"><input type="checkbox" name="healthProblems[]" value="Diabetes mellitus" id="checkbox26" required><label for="checkbox26">Diabetes mellitus</label></div>
                            <div class="answer"><input type="checkbox" name="healthProblems[]" value="High cholesterol" id="checkbox27" required><label for="checkbox27">High cholesterol</label></div>
                            <div class="answer"><input type="checkbox" name="healthProblems[]" value="High blood pressure" id="checkbox28" required><label for="checkbox28">High blood pressure</label></div>
                            <div class="answer"><input type="checkbox" name="healthProblems[]" value="Coronary artery disease" id="checkbox29" required><label for="checkbox29">Coronary artery disease</label></div>
                            <div class="answer"><input type="checkbox" name="healthProblems[]" value="Atrial fibrillation" id="checkbox30" required><label for="checkbox30">Atrial fibrillation</label></div>
                            <div class="answer"><input type="checkbox" name="healthProblems[]" value="Prefer not to answer" id="checkbox39" required><label for="checkbox39">None</label></div>
                          </fieldset>
                      	</div>
                    </div>
                  	<div class="quiz-tab">
                       	<h2>Do you take any of these medications regularly? </h2>
              			<div class="options">
                          <fieldset>
                          	<legend>Check All That Apply</legend>
                            <div class="answer"><input type="checkbox" name="medications[]" value="Prostate medication" id="checkbox31" required><label for="checkbox31">Prostate medication</label></div>
                            <div class="answer"><input type="checkbox" name="medications[]" value="Hydroxycholoroquine" id="checkbox32" required><label for="checkbox32">Hydroxycholoroquine</label></div>
                            <div class="answer"><input type="checkbox" name="medications[]" value="Prednisone or other steroid" id="checkbox33" required><label for="checkbox33">Prednisone or other steroid</label></div>
                            <div class="answer"><input type="checkbox" name="medications[]" value="Anticoagulant (Coumadin, Eliquis, Xarelto, etc.)" id="checkbox34" required><label for="checkbox34">Anticoagulant (Coumadin, Eliquis, Xarelto, etc.)</label></div>
                            <div class="answer"><input type="checkbox" name="medications[]" value="None" id="checkbox40" required><label for="checkbox40">None</label></div>
                          </fieldset>
                      	</div>
                    </div>
                 	<div class="quiz-tab">
                       	<h2>Would you be interested in receiving an email from Dr. Krawitz about your unique answers and recommendations for eye health?</h2>
              			<div class="options">
                          <input class="space" type="email" value="" name="email" id="k_id_email" placeholder="Your email" required/>
                      	  <button type="submit" class="space">COMPLETE YOUR ASSESSMENT</button>		
                      </div>
                    </div>
                    
                    <div style="overflow:auto;">
                        <!-- <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button> -->
                        <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
                    </div>
                    <!-- Circles which indicates the steps of the form: -->
                    <div style="text-align:center;margin-top:40px;" id="step-circle">
                        <span class="step"></span>
                        <span class="step"></span>
                        <span class="step"></span>
                        <span class="step"></span>
                      	<span class="step"></span>
                        <span class="step"></span>
                        <span class="step"></span>
                        <span class="step"></span>
                    </div>
                </form>
                <script type="text/javascript" src="//www.klaviyo.com/media/js/public/klaviyo_subscribe.js"></script>

                <script type="text/javascript">
                    var formToObject = function(form)
                    {
                    	var result = {};
                    	var elements = form.querySelectorAll('input');
                    	for (var i = 0; i < elements.length; i++)
                        {
                        	var element = elements[i];
                        	var name = element.name;
                        	var isArray = false

							if (name == '')
							{
								continue;
							}

							if (name.indexOf('[]') === name.length - 2)
                            {
                            	name = name.substring(0, name.length - 2);
                            	isArray = true;

                            	if (result.hasOwnProperty(name) && typeof(result[name]) == 'string')
                                {
                                	result[name] = [ result[name] ];
                                }
                            	else if(!result.hasOwnProperty(name))
                                {
                                	result[name] = [];
                                }
                            }

                        	switch(element.type.toLowerCase())
                            {
                            	case 'checkbox':
                                case 'radio':
                            		if (element.checked)
                                    {
                                    	if (isArray)
                                        {
                                        	result[name].push(element.value);
                                        }
                                    	else
                                        {
											result[element.name] = element.value;
                                        }
                                    }
                            		break;
                            }
                        }
                    	return result;
                    }

                    document.getElementById('email_signup').addEventListener('submit', function(e)
                    {
                    	e.preventDefault();

                    	var form = document.createElement('form');
                    	form.action = 'https://formcarry.com/s/OgLE-ETsn8Y4';
                    	form.method = 'POST'

                        var data = formToObject(this);
                    	data.email = this.querySelector('#k_id_email').value;

                        for (var d in data)
                        {
                        	if (!data.hasOwnProperty(d))
                            {
                            	continue;
                            }
                        	var value = data[d]
							var input = document.createElement('input');
							input.type = 'hidden';
							input.name = d;
							input.value = typeof(value) == 'string' ? value : value.join(', ');
							form.appendChild(input);
						}

                    	document.body.appendChild(form);
                        form.submit();
                    }, true);
                </script>
              	
            </div>
        </div>
    </div>
</section>

<section class="content">
    <div class="grid-container">
        <div class="grid-x grid-margin-x">
            <div class="cell">
              {{ page.content }}
          	</div>
      </div>
  </div>
</section>


<script>
    var currentTab = 0; // Current tab is set to be the first tab (0)
    showTab(currentTab); // Display the current tab
    function showTab(n) {
      // This function will display the specified tab of the form...
      var x = document.getElementsByClassName("quiz-tab");
      x[n].style.display = "block";
      //... and fix the Previous/Next buttons:
    //   if (n == 0) {
    //     document.getElementById("prevBtn").style.display = "none";
    //   } else {
    //     document.getElementById("prevBtn").style.display = "inline";
    //   }
      if (n == (x.length - 1)) {
        document.getElementById("nextBtn").style.display = "none";
        document.getElementById("step-circle").style.display = "none";
      } else {
        document.getElementById("nextBtn").innerHTML = "CONTINUE";
      }
      //... and run a function that will display the correct step indicator:
      fixStepIndicator(n)
    }
    function nextPrev(n) {
      // This function will figure out which tab to display
      var x = document.getElementsByClassName("quiz-tab");
      // Exit the function if any field in the current tab is invalid:
      if (n == 1 && !validateForm()) return false;
      // Hide the current tab:
      x[currentTab].style.display = "none";
      // Increase or decrease the current tab by 1:
      currentTab = currentTab + n;
      // if you have reached the end of the form...
      if (currentTab >= x.length) {
        // ... the form gets submitted:
        document.getElementById("email_signup").submit();
        return false;
      }
      // Otherwise, display the correct tab:
      showTab(currentTab);
    }
    function validateForm() {
      // This function deals with validation of the form fields
      var x, y, i, valid = false;
      x = document.getElementsByClassName("quiz-tab");
      y = x[currentTab].getElementsByTagName("input");
      // A loop that checks every input field in the current tab:

		if (y.length > 0)
		{
			for (i = 0; i < y.length; i++)
			{
                if (y[i].checked)
                {
                	valid = true;
                }
			}
		}
		else
        {
        	valid = true;
        }

		// If the valid status is true, mark the step as finished and valid:
      if (valid) {
        document.getElementsByClassName("step")[currentTab].className += " finish";
      }
      else
      {
      	x[currentTab].classList.add('error');
      }
      return valid; // return the valid status
    }
    
    function fixStepIndicator(n) {
      // This function removes the "active" class of all steps...
      var i, x = document.getElementsByClassName("step");
      for (i = 0; i < x.length; i++) {
        x[i].className = x[i].className.replace(" active", "");
      }
      //... and adds the "active" class on the current step:
      x[n].className += " active";
    }
</script>
{% include 'atb' zone:"Bottom"%}

